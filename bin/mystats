#!/usr/bin/env bash

lsb_release -ds 2>/dev/null
uptime -p

echo -e "\n$(whoami)@$(hostname)\n"
acpi | perl -pe 's/^[^:]+:\s(.*)$/$1/'

if [[ $1 == "ip" ]]; then
    echo -ne "\nip-local: "
    ifconfig 2>/dev/null | grep "inet addr" | grep -v ":127" | awk '{print $2}' | cut -c 6-

    [[ $? -ne 0 ]] && echo
    echo -ne "ip-public: "
    wget https://httpbin.org/ip -qO - | grep origin | perl -pe 's/^.*\"(.*)\".*$/$1/'
fi

echo -e "\npartitions:"
lsblk -o name,size,type,mountpoint | grep 'part' | sort -k2 -h

echo
df -h --output=source,target,size,avail | egrep '(^Filesystem|^/dev)'

echo -e "\nusers online:"
who | awk '{print $1,$2}'

echo -e "\nTmux sessions:"
tmux ls 2>/dev/null | awk '{print $1,$2,$3}'

echo -e "\nVim swap files:"
find ~ -name ".*sw[po]" -exec basename {} \; | sort | uniq
