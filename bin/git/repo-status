#!/usr/bin/env bash

path=$1
[[ -z "$path" ]] && path=$(pwd)
path=$(repo-path $path)
[[ -z "$path" ]] && exit 1

remote=$(repo-remote $path)
branch=$(branchname $path)
newcommits=$(unpushed-commits $path)
stashes=$(stashlist $path)

echo -e "$path -- $remote -- $branch"
if [[ -n "$1" ]]; then
    cd $path
else
    # Show the relative paths if inside a repo already
    pwd
fi
git status -s

[[ -n "$newcommits" ]] && echo -e "\nNot pushed\n$newcommits"
[[ -n "$stashes" ]] && echo -e "\nStashes\n$stashes"
