#!/usr/bin/env bash
#
# Display local branches for all repos that have more than master/develop

echo "Showing local branches of repos that have more than master/develop checked out"
for repo in $(all-repos-list | tr '\n' '\0' | xargs -0); do
    remote=$(repo-remote $repo)
    branch=$(branchname $repo)
    cd "$repo"
    branches=$(git branch)
    if [[ -n $(echo -e "$branches" | egrep -v '(master|develop)') ]]; then
        echo -e "\n==============="
        echo -e "$repo -- $remote --  $branch\n$branches"
    fi
done | less -FX
