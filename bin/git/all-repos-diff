#!/usr/bin/env bash
#
# Display diffs in repos for repos that have diffs

for repo in $(all-repos-list | tr '\n' '\0' | xargs -0); do
    remote=$(repo-remote $repo)
    branch=$(branchname $repo)
    cd $repo
    the_diff=$(git diff)
    if [[ -n "$the_diff" ]]; then
        echo -e "\n==============="
        echo -e "$repo -- $remote --  $branch\n$the_diff"
    fi
done | colordiff | less -rFX
