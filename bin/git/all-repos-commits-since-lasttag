#!/usr/bin/env bash
#
# Display commits in repositories that are ahead of that latest tag

echo "Showing repos that have commits after latest tag"
for repo in $(all-repos-list | tr '\n' '\0' | xargs -0); do
    next_tag_commits=$(since-lasttag $repo)
    if [[ -n "$next_tag_commits" ]]; then
        remote=$(repo-remote $repo)
        branch=$(branchname $repo)
        echo -e "\n==============="
        echo -e "$repo -- $remote --  $branch\n$next_tag_commits"
    fi
done | less -FX
